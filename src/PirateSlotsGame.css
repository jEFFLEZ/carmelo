/* PirateSlotsGame.css - Animations & ambiance Qfluch + FX visuels */

body, .pirate-bg {
  background: url("/src/images/fond.png") center center no-repeat fixed;
  background-size: cover;
  min-height: 100vh;
  overflow: hidden;
}

.pirate-brume {
  position: absolute;
  top: 0; left: 0; width: 100vw; height: 100vh;
  pointer-events: none;
  background: none;
  opacity: 0.18;
  z-index: 0;
}

.bat-animation {
  position: absolute;
  left: -120px;
  top: 60px;
  width: 80px; height: 40px;
  background: url('/src/images/chauve.png') center/contain no-repeat;
  animation: batFly 1.2s cubic-bezier(.7,.2,.3,1) forwards;
  z-index: 10;
}
@keyframes batFly {
  0% { left: -120px; top: 60px; opacity: 0; }
  20% { opacity: 1; }
  80% { left: 70vw; top: 120px; opacity: 1; }
  100% { left: 100vw; top: 40px; opacity: 0; }
}

.coin-drop-animation {
  position: absolute;
  left: 50vw;
  top: 0;
  width: 40px; height: 40px;
  background: url('https://i.imgur.com/3Q9ZQ9Q.png') center/contain no-repeat;
  animation: coinDrop 1.2s cubic-bezier(.7,.2,.3,1) forwards;
  z-index: 10;
}
@keyframes coinDrop {
  0% { top: 0; opacity: 0; }
  20% { opacity: 1; }
  80% { top: 70vh; opacity: 1; }
  100% { top: 100vh; opacity: 0; }
}

.blunderbuss-shot-animation {
  position: absolute;
  left: 48vw; top: 30vh;
  width: 120px; height: 120px;
  background: radial-gradient(circle, #fffbe6 0%, #ff9800 60%, transparent 100%);
  opacity: 0.7;
  animation: shotFlash 0.5s linear forwards;
  z-index: 20;
}
@keyframes shotFlash {
  0% { opacity: 0.7; transform: scale(0.7); }
  50% { opacity: 1; transform: scale(1.2); }
  100% { opacity: 0; transform: scale(1.5); }
}

.card-anim {
  display: inline-block;
  transition: transform 0.5s cubic-bezier(.7,.2,.3,1), box-shadow 0.5s;
  will-change: transform;
}
.card-anim.spin {
  transform: rotateY(360deg) scale(1.1);
  box-shadow: 0 0 32px #ffe08299;
}
.card-anim.rotate {
  animation: rotateSpin 0.6s linear;
}
@keyframes rotateSpin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.lantern-glow {
  position: absolute;
  right: 40px; top: 40px;
  width: 120px; height: 120px;
  background: radial-gradient(circle, #ffe082 0%, transparent 80%);
  opacity: 0.18;
  z-index: 1;
}

/* FX visuels synchronisés avec le jeu */
.gameRoot { position: relative; }
.fxOverlay {
  pointer-events: none;
  position: absolute;
  inset: 0;
  opacity: 0;
  z-index: 100;
}

.gameRoot.fx-win .fxOverlay.fx-win {
  opacity: 1;
  animation: flash 0.25s ease-in-out 0s 3;
  background: radial-gradient(circle, #ffe08288 0%, transparent 80%);
}

.gameRoot.fx-bigwin .fxOverlay.fx-bigwin {
  opacity: 1;
  animation: shake 0.7s ease-in-out, flash 0.18s ease-in-out 0s 4;
  background: radial-gradient(circle, #ff980088 0%, transparent 80%);
}

.gameRoot.fx-jackpot .fxOverlay.fx-jackpot {
  opacity: 1;
  animation: jackpotFlash 1.2s cubic-bezier(.7,.2,.3,1);
  background: repeating-linear-gradient(135deg, #ffe08244 0 20px, #ff980044 20px 40px);
}

.gameRoot.fx-spin .fxOverlay.fx-spin {
  opacity: 0.5;
  animation: spinPulse 0.5s cubic-bezier(.7,.2,.3,1);
  background: radial-gradient(circle, #fffbe633 0%, transparent 80%);
}

@keyframes flash {
  0%{opacity:0} 50%{opacity:1} 100%{opacity:0}
}
@keyframes shake {
  0%{transform:translate(0,0)}
  20%{transform:translate(-6px,2px)}
  40%{transform:translate(6px,-2px)}
  60%{transform:translate(-4px,-1px)}
  80%{transform:translate(4px,1px)}
  100%{transform:translate(0,0)}
}
@keyframes jackpotFlash {
  0%{opacity:0.2} 20%{opacity:1} 60%{opacity:1} 100%{opacity:0}
}
@keyframes spinPulse {
  0%{opacity:0.5} 100%{opacity:0}
}

.gameRoot {
  position: relative;
  background: transparent !important;
  box-shadow: none !important;
}

/* Ajout : rendre tous les overlays/canvas transparents */
.fxOverlay, .pirate-brume, canvas {
  background: transparent !important;
}

/* Grille du rouleau occupe tout l'espace possible */
.slot-grid-max {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  grid-template-rows: repeat(5, 1fr);
  gap: 8px;
  width: 100vw;
  max-width: 100vw;
  height: 60vh;
  max-height: 70vh;
  margin: 0 auto;
  align-items: stretch;
  justify-items: stretch;
  background: transparent;
  border-radius: 18px;
  border: 2px solid #ff9800;
  box-shadow: 0 2px 16px #000;
  padding: 0;
}

.slot-grid-max .card-anim {
  width: 100%;
  height: 100%;
  font-size: 7vw;
  min-height: 0;
  min-width: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Styles pour le mini-jeu Chasse au Trésor */
.miniGameOverlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.85);
  z-index: 9999;
  color: #ffe082;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.boatGrid {
  display: grid;
  grid-template-columns: repeat(3, 80px);
  gap: 12px;
  margin-top: 16px;
}

.boat {
  font-size: 36px;
  background: #222;
  border: 2px solid #ff9800;
  border-radius: 8px;
  cursor: pointer;
  height: 80px;
}

.boat.sunk {
  background: #000;
  opacity: 0.8;
}

.pirate-highlight {
  box-shadow: 0 0 16px 6px #ffe082, 0 0 0 4px #ff9800;
  border-radius: 10px;
  z-index: 2;
  background: rgba(255, 232, 130, 0.10);
  transition: box-shadow 0.2s, background 0.2s;
}
.pirate-highlight-multi {
  box-shadow: 0 0 16px 6px #ffe082, 0 0 0 4px #ff9800, 0 0 24px 8px #00eaff, 0 0 32px 12px #ff00ea;
  border-radius: 12px;
  z-index: 2;
  background: linear-gradient(135deg, #ffe08244 0%, #ff980044 50%, #00eaff44 100%);
  animation: pirateMulti 1.2s linear infinite;
}
@keyframes pirateMulti {
  0% { box-shadow: 0 0 16px 6px #ffe082, 0 0 0 4px #ff9800, 0 0 24px 8px #00eaff, 0 0 32px 12px #ff00ea; }
  25% { box-shadow: 0 0 24px 8px #ff9800, 0 0 0 4px #00eaff, 0 0 32px 12px #ff00ea, 0 0 16px 6px #ffe082; }
  50% { box-shadow: 0 0 32px 12px #ff00ea, 0 0 0 4px #ffe082, 0 0 16px 6px #00eaff, 0 0 24px 8px #ff9800; }
  75% { box-shadow: 0 0 24px 8px #00eaff, 0 0 0 4px #ff00ea, 0 0 16px 6px #ff9800, 0 0 32px 12px #ffe082; }
  100% { box-shadow: 0 0 16px 6px #ffe082, 0 0 0 4px #ff9800, 0 0 24px 8px #00eaff, 0 0 32px 12px #ff00ea; }
}

.win-highlight {
  box-shadow: 0 0 24px 8px #fffbe6, 0 0 0 4px #ffe082;
  border-radius: 12px;
  z-index: 3;
  background: linear-gradient(135deg, #fffbe644 0%, #ffe08244 100%);
  animation: winFlash 0.7s linear infinite alternate;
}
@keyframes winFlash {
  0% { filter: brightness(1.2); }
  100% { filter: brightness(1.7); }
}

/* Adapter les images à la taille du cadrant */
.slot-grid-max .card-anim img {
  width: 90% !important;
  height: 90% !important;
  object-fit: contain !important;
  display: block;
  margin: 0 auto;
}
